// Minimal PdfTeXEngine stub for development/testing.
(function () {
  // Pre-encoded "Hello" PDF so tests can exercise binary handling without
  // string conversions.
  const pdfBytes = new Uint8Array([
    37, 80, 68, 70, 45, 49, 46, 49, 10, 49, 32, 48, 32, 111, 98, 106, 60, 60,
    32, 47, 84, 121, 112, 101, 32, 47, 67, 97, 116, 97, 108, 111, 103, 32, 47,
    80, 97, 103, 101, 115, 32, 50, 32, 48, 32, 82, 62, 62, 101, 110, 100, 111,
    98, 106, 10, 50, 32, 48, 32, 111, 98, 106, 60, 60, 32, 47, 84, 121, 112,
    101, 32, 47, 80, 97, 103, 101, 115, 32, 47, 75, 105, 100, 115, 32, 91, 51,
    32, 48, 32, 82, 93, 32, 47, 67, 111, 117, 110, 116, 32, 49, 62, 62, 101,
    110, 100, 111, 98, 106, 10, 51, 32, 48, 32, 111, 98, 106, 60, 60, 32, 47,
    84, 121, 112, 101, 32, 47, 80, 97, 103, 101, 32, 47, 80, 97, 114, 101, 110,
    116, 32, 50, 32, 48, 32, 82, 32, 47, 77, 101, 100, 105, 97, 66, 111, 120,
    32, 91, 48, 32, 48, 32, 51, 48, 48, 32, 49, 52, 52, 93, 32, 47, 67, 111,
    110, 116, 101, 110, 116, 115, 32, 52, 32, 48, 32, 82, 32, 47, 82, 101, 115,
    111, 117, 114, 99, 101, 115, 32, 60, 60, 32, 47, 70, 111, 110, 116, 32, 60,
    60, 32, 47, 70, 49, 32, 53, 32, 48, 32, 82, 62, 62, 62, 62, 62, 62, 101,
    110, 100, 111, 98, 106, 10, 52, 32, 48, 32, 111, 98, 106, 60, 60, 32, 47,
    76, 101, 110, 103, 116, 104, 32, 52, 52, 62, 62, 115, 116, 114, 101, 97, 109,
    10, 66, 84, 32, 47, 70, 49, 32, 50, 52, 32, 84, 102, 32, 53, 48, 32, 49, 48,
    48, 32, 84, 100, 32, 40, 72, 101, 108, 108, 111, 41, 32, 84, 106, 32, 69,
    84, 10, 101, 110, 100, 115, 116, 114, 101, 97, 109, 10, 101, 110, 100, 111,
    98, 106, 10, 53, 32, 48, 32, 111, 98, 106, 60, 60, 32, 47, 84, 121, 112, 101,
    32, 47, 70, 111, 110, 116, 32, 47, 83, 117, 98, 116, 121, 112, 101, 32, 47,
    84, 121, 112, 101, 49, 32, 47, 66, 97, 115, 101, 70, 111, 110, 116, 32, 47,
    72, 101, 108, 118, 101, 116, 105, 99, 97, 62, 62, 101, 110, 100, 111, 98,
    106, 10, 120, 114, 101, 102, 10, 48, 32, 54, 10, 48, 48, 48, 48, 48, 48, 48,
    48, 48, 48, 32, 54, 53, 53, 51, 53, 32, 102, 32, 10, 48, 48, 48, 48, 48, 48,
    48, 48, 49, 48, 32, 48, 48, 48, 48, 48, 32, 110, 32, 10, 48, 48, 48, 48, 48,
    48, 48, 48, 54, 49, 32, 48, 48, 48, 48, 48, 32, 110, 32, 10, 48, 48, 48, 48,
    48, 48, 48, 49, 50, 57, 32, 48, 48, 48, 48, 48, 32, 110, 32, 10, 48, 48, 48,
    48, 48, 48, 48, 50, 57, 48, 32, 48, 48, 48, 48, 48, 32, 110, 32, 10, 48, 48,
    48, 48, 48, 48, 48, 51, 56, 49, 32, 48, 48, 48, 48, 48, 32, 110, 32, 10, 116,
    114, 97, 105, 108, 101, 114, 60, 60, 32, 47, 83, 105, 122, 101, 32, 54, 32,
    47, 82, 111, 111, 116, 32, 49, 32, 48, 32, 82, 62, 62, 10, 115, 116, 97, 114,
    116, 120, 114, 101, 102, 10, 52, 53, 50, 10, 37, 37, 69, 79, 70,
  ]);

  window.PdfTeXEngine = class {
    constructor() {
      this.fs = {};
      this.main = 'main.tex';
    }
    async loadEngine() {}
    flushCache() {
      this.fs = {};
    }
    writeMemFSFile(name, data) {
      this.fs[name] = data;
    }
    setEngineMainFile(name) {
      this.main = name;
    }
    async compileLaTeX() {
      return { pdf: pdfBytes, log: 'stub pdf generated' };
    }
  };
})();
